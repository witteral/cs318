!function(){function e(e,t,a){if(1==p.test){var r=document.createElement("div");r.innerHTML='<div class="debug_barometric_test" style="height:6px;width:6px;background:'+e+";position:absolute;top:"+t+"px;left:"+a+'px;z-index:2000"></div>',s.appendChild(r)}}function t(){function e(e){return e.replace(/^(?:[a-z0-9\-\.]+\.)??([a-z0-9\-]+)(?:\.com|\.net|\.org|\.biz|\.ws|\.in|\.me|\.co\.uk|\.co|\.org\.uk|\.ltd\.uk|\.plc\.uk|\.me\.uk|\.edu|\.mil|\.br\.com|\.cn\.com|\.eu\.com|\.hu\.com|\.no\.com|\.qc\.com|\.sa\.com|\.se\.com|\.se\.net|\.us\.com|\.uy\.com|\.ac|\.co\.ac|\.gv\.ac|\.or\.ac|\.ac\.ac|\.af|\.am|\.as|\.at|\.ac\.at|\.co\.at|\.gv\.at|\.or\.at|\.asn\.au|\.com\.au|\.edu\.au|\.org\.au|\.net\.au|\.id\.au|\.be|\.ac\.be|\.adm\.br|\.adv\.br|\.am\.br|\.arq\.br|\.art\.br|\.bio\.br|\.cng\.br|\.cnt\.br|\.com\.br|\.ecn\.br|\.eng\.br|\.esp\.br|\.etc\.br|\.eti\.br|\.fm\.br|\.fot\.br|\.fst\.br|\.g12\.br|\.gov\.br|\.ind\.br|\.inf\.br|\.jor\.br|\.lel\.br|\.med\.br|\.mil\.br|\.net\.br|\.nom\.br|\.ntr\.br|\.odo\.br|\.org\.br|\.ppg\.br|\.pro\.br|\.psc\.br|\.psi\.br|\.rec\.br|\.slg\.br|\.tmp\.br|\.tur\.br|\.tv\.br|\.vet\.br|\.zlg\.br|\.br|\.ab\.ca|\.bc\.ca|\.mb\.ca|\.nb\.ca|\.nf\.ca|\.ns\.ca|\.nt\.ca|\.on\.ca|\.pe\.ca|\.qc\.ca|\.sk\.ca|\.yk\.ca|\.ca|\.cc|\.ac\.cn|\.com\.cn|\.edu\.cn|\.gov\.cn|\.org\.cn|\.bj\.cn|\.sh\.cn|\.tj\.cn|\.cq\.cn|\.he\.cn|\.nm\.cn|\.ln\.cn|\.jl\.cn|\.hl\.cn|\.js\.cn|\.zj\.cn|\.ah\.cn|\.gd\.cn|\.gx\.cn|\.hi\.cn|\.sc\.cn|\.gz\.cn|\.yn\.cn|\.xz\.cn|\.sn\.cn|\.gs\.cn|\.qh\.cn|\.nx\.cn|\.xj\.cn|\.tw\.cn|\.hk\.cn|\.mo\.cn|\.cn|\.cx|\.cz|\.de|\.dk|\.fo|\.com\.ec|\.tm\.fr|\.com\.fr|\.asso\.fr|\.presse\.fr|\.fr|\.gf|\.gs|\.co\.il|\.net\.il|\.ac\.il|\.k12\.il|\.gov\.il|\.muni\.il|\.ac\.in|\.co\.in|\.org\.in|\.ernet\.in|\.gov\.in|\.net\.in|\.res\.in|\.is|\.it|\.ac\.jp|\.co\.jp|\.go\.jp|\.or\.jp|\.ne\.jp|\.ac\.kr|\.co\.kr|\.go\.kr|\.ne\.kr|\.nm\.kr|\.or\.kr|\.li|\.lt|\.lu|\.asso\.mc|\.tm\.mc|\.com\.mm|\.org\.mm|\.net\.mm|\.edu\.mm|\.gov\.mm|\.ms|\.nl|\.no|\.nu|\.pl|\.ro|\.org\.ro|\.store\.ro|\.tm\.ro|\.firm\.ro|\.www\.ro|\.arts\.ro|\.rec\.ro|\.info\.ro|\.nom\.ro|\.nt\.ro|\.se|\.si|\.com\.sg|\.org\.sg|\.net\.sg|\.gov\.sg|\.sk|\.st|\.tf|\.ac\.th|\.co\.th|\.go\.th|\.mi\.th|\.net\.th|\.or\.th|\.tm|\.to|\.com\.tr|\.edu\.tr|\.gov\.tr|\.k12\.tr|\.net\.tr|\.org\.tr|\.com\.tw|\.org\.tw|\.net\.tw|\.ac\.uk|\.uk\.com|\.uk\.net|\.gb\.com|\.gb\.net|\.vg|\.sh|\.kz|\.ch|\.info|\.ua|\.gov|\.name|\.pro|\.ie|\.hk|\.com\.hk|\.org\.hk|\.net\.hk|\.edu\.hk|\.us|\.tk|\.cd|\.by|\.ad|\.lv|\.eu\.lv|\.bz|\.es|\.jp|\.cl|\.ag|\.mobi|\.eu|\.co\.nz|\.org\.nz|\.net\.nz|\.maori\.nz|\.iwi\.nz|\.io|\.la|\.md|\.sc|\.sg|\.vc|\.tw|\.travel|\.my|\.se|\.tv|\.pt|\.com\.pt|\.edu\.pt|\.asia|\.fi|\.com\.ve|\.net\.ve|\.fi|\.org\.ve|\.web\.ve|\.info\.ve|\.co\.ve|\.tel|\.im|\.gr|\.ru|\.net\.ru|\.org\.ru|\.hr|\.com\.hr)$/,"$1")}var t="";try{t=top.document.location.href,t&&void 0!=t||!window.top.location.href||(t=window.top.location.href)}catch(a){}try{(!t||void 0==t&&window.self!==window.top)&&document.referrer&&(t=document.referrer)}catch(a){}try{t&&void 0!=t||!location.href||(t=location.href)}catch(a){}if(t){try{t=new URL(t).hostname}catch(a){}console.info("Barometric: Served on Domain "+t),/^[a-zA-Z0-9][a-zA-Z0-9-]{1,61}[a-zA-Z0-9](?:\.[a-zA-Z]{2,})+$/.test(t)||(t=""),t=t.replace("www.","").replace("http://","").replace("https://",""),t=encodeURIComponent(t.toLowerCase())}if(t){var r=["admarvel","ads","mopub","mydas","smaato","themediatrust","nexage","aerserv","inmobi","google","smartadserver","adnxs","aftomedia","tapad","pubmatic","srax","tictacti","okcimg","mobileposse","synoloads","optmd","avkolabs","appsgeyser","geoedge","zedo","openx","kargo","adtechus","adtheorent","rubiconproject","tappx","akamaihd","selectablemedia","gumgum","starbolt","ampproject","yahoo","cachefly","securenetsystems"];new RegExp(r.join("|")).test(e(t))&&(p.transparencyGap=1,p.measuredViewability=0,console.info("Barometric: Transparency Gap found"))}return t}function a(){b>=3&&(console.log("Barometric: This is not an MRAID tag"),d(),clearInterval(g));try{"complete"===document.readyState&&"undefined"!=typeof mraid?(console.log("Barometric: This is an MRAID tag"),p.transparencyGap=0,p.measuredViewability=1,p.adType="mraid",clearInterval(g),d()):e("blue",0,30)}catch(t){console.warn("Barometric: MRAID script error"),p.adType="mweb",d()}b++}function r(){"visible"==u?(console.log("Barometric: Page is Visible"),clearInterval(v)):"prerender"==u?u==document.visibilityState||("visible"==document.visibilityState?(console.log("Barometric: Changed from Prerender to Visible."),clearInterval(v),u="visible",p.visFlag=";dvis="+u,document.getElementById(p.adBannerId).src=p.bannerImg+p.visFlag,document.getElementById(p.adTpId).src=p.ifrm):(console.log("Barometric: Changed from Prerender to unknown state."),clearInterval(v))):(console.log("Not visible or prerender"),clearInterval(v))}function i(){e("green",0,0),console.log("Barometric: Viewability has been reached");var t=document.createElement("img");t.height=1,t.width=1,t.style.display="none",t.src=p.adProtocol+"://"+p.adDomain+"/pixel/view/c="+p.cpam[0]+";p="+p.cpam[1]+";ord="+p.ord+";tpplc="+l.tpplc+";tpcrid="+l.tpcrid+";dvis="+u+";v="+p.adTagVersionRaw+";x=;xf=0;xe=",s.appendChild(t)}function o(t){e("aqua",6,0);var a=t.getBoundingClientRect();return a.top>=0&&a.left>=0&&a.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&a.right<=(window.innerWidth||document.documentElement.clientWidth)&&1==p.measuredViewability}function c(t){console.warn("Barometric: An error has occurred: ["+t+"]");var a=document.createElement("img");a.height=1,a.width=1,a.style.display="none",a.src=p.adProtocol+"://"+p.adDomain+"/error?c="+p.cpam[0]+"&p="+p.cpam[1]+"&partner="+p.cpam[3]+"&e="+encodeURIComponent(t),s.appendChild(a),e("YellowGreen",6,12)}function n(){console.log("Barometric: Standard JS pixel being shown");var t=document.createElement("img"),a=document.createElement("a");a.href=p.ctu,a.setAttribute("target","_blank"),a.setAttribute("id",p.adClkId),t.setAttribute("height",m.adHeight),t.setAttribute("width",m.adWidth),s.setAttribute("height",m.adHeight),s.setAttribute("width",m.adWidth),t.setAttribute("id",p.adBannerId),t.setAttribute("border","0"),t.style.border="0",t.style.top="0",t.style.left="0",t.style.position="relative",t.style.margin="auto",t.setAttribute("src",p.bannerImg+p.visFlag),a.appendChild(t),s.appendChild(a);var r=document.createElement("iframe");r.width="0px",r.height="0px",r.style.visibility="hidden",r.id=p.adTpId,"prerender"!=u?r.setAttribute("src",p.ifrm):r.setAttribute("src",""),s.appendChild(r),e("red",0,6)}function d(){function t(){_||(i(),_=!0)}function a(){console.log("Barometric: Safeframe In-view:"+w.inViewPercentage()),w.inViewPercentage()>=g&&("visible"==u||"undefined"==u)?_||(I=setTimeout(function(){t()},h)):clearTimeout(I)}function r(t){console.log("Barometric: An MRAID click happened"),mraid.open(t),e("wheat",6,24)}function d(){console.log("Barometric: showAd via MRAID");var t=document.createElement("img"),a=document.createElement("a");a.href=p.ctu,a.setAttribute("target","_blank"),a.setAttribute("id",p.adClkId),t.setAttribute("height",m.adHeight),t.setAttribute("width",m.adWidth),s.setAttribute("height",m.adHeight),s.setAttribute("width",m.adWidth),t.setAttribute("id",p.adBannerId),a.addEventListener("click",function(){r(p.ctu)},!1),t.setAttribute("border","0"),t.style.border="0",t.style.top="0",t.style.left="0",t.style.position="relative",t.style.margin="auto",t.setAttribute("src",p.bannerImg+p.visFlag),a.appendChild(t),s.appendChild(a);var i=document.createElement("iframe");i.width="0px",i.height="0px",i.style.visibility="hidden",i.id=p.adTpId,"prerender"!=u?i.setAttribute("src",p.ifrm):i.setAttribute("src",""),s.appendChild(i),e("yellow",0,12)}function l(){0==p.transparencyGap&&(console.log("Barometric: Check MRAID visibility"),mraid.isViewable()?(i(),1===x&&mraid.removeEventListener("viewableChange",l)):(mraid.addEventListener("viewableChange",l),x=1))}function v(){console.log("Barometric: MRAID is available"),d(),l()}function b(){k>=5&&(n(),e("orange",0,18),c("mraid should be avalable but is not"),clearInterval(T)),"complete"===document.readyState&&"undefined"!=typeof mraid&&("loading"===mraid.getState()?mraid.addEventListener("ready",v):"default"===mraid.getState()&&v(),clearInterval(T)),k++}if("mweb"===p.adType){console.log("Barometric: Mobile web tag triggered"),n();var g=50,h=1e3,f=window,y=f.$sf,w=y&&y.ext,I=0,_=!1;if(w)try{w.register(m.adWidth,m.adHeight,a),e("purple",0,24),console.log("Barometric: Safeframe is available")}catch(A){e("DarkGray",6,30),c("safeframe should be avalable but is not")}else console.log("Barometric: Safeframe is not available"),!o(s)||"visible"!=u&&"undefined"!=u?clearTimeout(I):(console.log("Barometric: JS tells us we are viewable"),_||(I=setTimeout(function(){t()},h)))}else{console.log("Barometric: MRAID tag triggered");var k=0,x=0,T=setInterval(b,25)}}var l=barometric_custom;if(l.divId)var s=document.getElementById(l.divId);else var s=document.getElementById("barometricContainer");if(null==s){var s=document.createElement("div");l.divId?s.id=l.divId:s.id="barometricContainer",document.body.appendChild(s),console.log("Barometric: Had to create the barometricContainer")}bmad={adDomain:"bm.adentifi.com",adCPAM:"4488|48794|0|104",adSecure:parseInt("1"),adHeight:parseInt("1"),adWidth:parseInt("1"),adFlight:parseInt("0"),adCreative:""};var m=bmad,p={adBannerId:"barometricjs",adClkId:"barometricjsclk",adTpId:"barotptags",adDomain:"trkn.us",adSecure:0,adTagVersion:"1.1.7",adTagVersionRaw:"117",adProtocol:"http",adType:"mweb",test:0,autoRefresh:0,transparencyGap:0,measuredViewability:1,impOnly:parseInt("1")};if(p.servedDomain=t(),void 0!=m.adDomain&&(p.adDomain=m.adDomain),void 0!=m.adType&&"mraid"===m.adType&&(p.adType=m.adType),void 0!=l.test&&1===l.test&&(p.test=l.test),void 0!=l.autoRefresh&&1===l.autoRefresh&&(p.autoRefresh=l.autoRefresh),void 0!=m.adPlaceholderId&&(p.adPlaceholderId=m.adPlaceholderId),void 0!=m.adSecure&&(p.adSecure=m.adSecure),1===p.adSecure&&(p.adProtocol="https"),l.cid||(l.cid=""),l.idfa||(l.idfa=""),l.cv1||(l.cv1=""),l.cv2||(l.cv2=""),l.cv3||(l.cv3=""),l.cv4||(l.cv4=""),l.lat||(l.lat=""),l.lon||(l.lon=""),l.tpcrid||(l.tpcrid=""),l.tpplc||(l.tpplc=""),l.revenue?l.revenue=l.revenue.replace("$",""):l.revenue="",l.ctu||(l.ctu="$$_DESTINATION_URL_$$"),p.ord="a3f522c5-1011-11e8-aff2-120a18169d76",p.cpam=m.adCPAM.split("|"),4!=p.cpam.length&&(p.cpam=m.adCPAM.split("$"),4!=p.cpam.length&&c("invalid cpam value: "+m.adCPAM)),console.log("Barometric: Placement - "+p.cpam[1]),e("violet",6,6),"undefined"==typeof document.visibilityState){console.log("This Browser Does Not Support the Page Visibility API");var u="undefined"}else var u=document.visibilityState,v=setInterval(r,25);var b=0,g=setInterval(a,25);p.bannerImg=p.adProtocol+"://"+p.adDomain+"/pixel/imp/c="+p.cpam[0]+";partner="+p.cpam[3]+";idfa="+l.idfa+";cid="+l.cid+";lat="+l.lat+";lon="+l.lon+";p="+p.cpam[1]+";x=;xf=0;tpplc="+l.tpplc+";tpcrid="+l.tpcrid+";cv1="+l.cv1+";cv2="+l.cv2+";cv3="+l.cv3+";cv4="+l.cv4+";rev="+l.revenue+";autoref="+p.autoRefresh+";test="+p.test+";ord="+p.ord+";xe=;measured="+p.measuredViewability+";d="+p.servedDomain+";tg="+p.transparencyGap+";v="+p.adTagVersionRaw+";nocr=1",p.ctu=p.adProtocol+"://"+p.adDomain+"/click/process/c="+p.cpam[0]+";partner="+p.cpam[3]+";idfa="+l.idfa+";cid="+l.cid+";lat="+l.lat+";lon="+l.lon+";p="+p.cpam[1]+";x=;xf=0;tpplc="+l.tpplc+";tpcrid="+l.tpcrid+";cv1="+l.cv1+";cv2="+l.cv2+";cv3="+l.cv3+";cv4="+l.cv4+";test="+p.test+";ord="+p.ord+";v="+p.adTagVersionRaw+";redirect=",p.ifrm=p.adProtocol+"://"+p.adDomain+"/iframe/t?c="+p.cpam[0]+"&partner="+p.cpam[3]+"&idfa="+l.idfa+"&cid="+l.cid+"&lat="+l.lat+"&lon="+l.lon+"&p="+p.cpam[1]+"&x=&xf=0&cv1="+l.cv1+"&cv2="+l.cv2+"&cv3="+l.cv3+"&cv4="+l.cv4+"&rev="+l.revenue+"&test="+p.test+"&ord="+p.ord+"&xe=&measured="+p.measuredViewability+"&d="+p.servedDomain+"&tg="+p.transparencyGap+"&nocr=1","undefined"!=u&&(p.visFlag=";dvis="+u),-1===l.ctu.indexOf("$$_DESTINATION_URL_$$")&&c("invalid ctu passed: "+l.ctu),"$$_DESTINATION_URL_$$"!=l.ctu?l.ctu=l.ctu.replace("$$_DESTINATION_URL_$$",encodeURIComponent(p.ctu)):l.ctu=p.ctu,p.ctu=l.ctu,1==p.impOnly&&(p.ctu="#")}();